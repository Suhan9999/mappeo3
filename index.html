<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mappa Interattiva NO2</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Mappa Interattiva dei Valori O3</h1>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Inizializza la mappa
        const map = L.map('map').setView([41.9028, 12.4964], 6); // Coordinata centrale: Roma

        // Aggiungi il layer della mappa (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Dati dal file CSV (puoi sostituirli dinamicamente)

const data = [{'lat': 45.1521446, 'lng': 7.6579731, 'valore': 14.0, 'comune': 'Borgaro Torinese', 'provincia': 'Torino'}, {'lat': 45.4324775, 'lng': 7.232401, 'valore': 7.0, 'comune': 'Ceresole Reale', 'provincia': 'Torino'}, {'lat': 45.0138842, 'lng': 7.8223544, 'valore': 38.0, 'comune': 'Chieri', 'provincia': 'Torino'}, {'lat': 45.1344531, 'lng': 7.5764559, 'valore': 32.0, 'comune': 'Druento', 'provincia': 'Torino'}, {'lat': 45.4673791, 'lng': 7.874797, 'valore': 26.0, 'comune': 'Ivrea', 'provincia': 'Torino'}, {'lat': 45.1845815, 'lng': 7.7132706, 'valore': 26.0, 'comune': 'Leini', 'provincia': 'Torino'}, {'lat': 45.0072629, 'lng': 7.5369192, 'valore': 33.0, 'comune': 'Orbassano', 'provincia': 'Torino'}, {'lat': 45.1372115, 'lng': 7.0539789, 'valore': 43.0, 'comune': 'Susa', 'provincia': 'Torino'}, {'lat': 45.0677551, 'lng': 7.6824892, 'valore': 49.0, 'comune': 'Torino', 'provincia': 'Torino'}, {'lat': 45.0677551, 'lng': 7.6824892, 'valore': 33.0, 'comune': 'Torino', 'provincia': 'Torino'}, {'lat': 44.9482927, 'lng': 7.6338469, 'valore': 15.0, 'comune': 'Vinovo', 'provincia': 'Torino'}, {'lat': 45.7166676, 'lng': 8.2768572, 'valore': 29.0, 'comune': 'Borgosesia', 'provincia': 'Vercelli'}, {'lat': 45.55538265, 'lng': 8.346283678327271, 'valore': 69.0, 'comune': 'Vercelli', 'provincia': 'Vercelli'}, {'lat': 45.58425005, 'lng': 8.545996970894572, 'valore': 22.0, 'comune': 'Novara', 'provincia': 'Novara'}, {'lat': 44.45807035, 'lng': 7.558136691151624, 'valore': 18.0, 'comune': 'Cuneo', 'provincia': 'Cuneo'}, {'lat': 44.6549482, 'lng': 7.3899141, 'valore': 13.0, 'comune': 'Revello', 'provincia': 'Cuneo'}, {'lat': 44.413336, 'lng': 8.168644, 'valore': 28.0, 'comune': 'Saliceto', 'provincia': 'Cuneo'}, {'lat': 44.82601265, 'lng': 8.202686328987273, 'valore': 40.0, 'comune': 'Asti', 'provincia': 'Asti'}, {'lat': 44.8073181, 'lng': 8.3173855, 'valore': 48.0, 'comune': 'Vinchio', 'provincia': 'Asti'}, {'lat': 44.83495335, 'lng': 8.745030418605868, 'valore': 37.0, 'comune': 'Alessandria', 'provincia': 'Alessandria'}, {'lat': 44.7668717, 'lng': 9.0507598, 'valore': 46.0, 'comune': 'Dernice', 'provincia': 'Alessandria'}, {'lat': 45.5669538, 'lng': 8.086912008297636, 'valore': 9.0, 'comune': 'Biella', 'provincia': 'Biella'}, {'lat': 45.5699123, 'lng': 8.1799881, 'valore': 37.0, 'comune': 'Cossato', 'provincia': 'Biella'}, {'lat': 45.666126, 'lng': 8.144302, 'valore': 21.0, 'comune': 'Valdilana', 'provincia': 'Biella'}, {'lat': 46.260882, 'lng': 8.320213, 'valore': 17.0, 'comune': 'Baceno', 'provincia': 'Verbano-Cusio-Ossola'}, {'lat': 46.1152451, 'lng': 8.2920459, 'valore': 13.0, 'comune': 'Domodossola', 'provincia': 'Verbano-Cusio-Ossola'}, {'lat': 45.9344082, 'lng': 8.5580062, 'valore': 42.0, 'comune': 'Verbania', 'provincia': 'Verbano-Cusio-Ossola'}, {'lat': 45.7370885, 'lng': 7.3196649, 'valore': 26.0, 'comune': 'Aosta', 'provincia': 'Aosta'}, {'lat': 45.6037633, 'lng': 7.7696974, 'valore': 28.0, 'comune': 'Donnas', 'provincia': 'Aosta'}, {'lat': 45.611932, 'lng': 8.8518269, 'valore': 52.0, 'comune': 'Busto Arsizio', 'provincia': 'Varese'}, {'lat': 45.6141475, 'lng': 8.7545482, 'valore': 67.0, 'comune': 'Ferno', 'provincia': 'Varese'}, {'lat': 45.6256764, 'lng': 9.0373283, 'valore': 83.0, 'comune': 'Saronno', 'provincia': 'Varese'}, {'lat': 45.8397203, 'lng': 8.754133838056571, 'valore': 39.0, 'comune': 'Varese', 'provincia': 'Varese'}, {'lat': 45.7395347, 'lng': 9.129103, 'valore': 81.0, 'comune': 'Cant√π', 'provincia': 'Como'}, {'lat': 45.939475900000005, 'lng': 9.149410132545793, 'valore': 73.0, 'comune': 'Como', 'provincia': 'Como'}, {'lat': 45.8097196, 'lng': 9.2166985, 'valore': 89.0, 'comune': 'Erba', 'provincia': 'Como'}, {'lat': 46.4692482, 'lng': 10.3721712, 'valore': 4.0, 'comune': 'Bormio', 'provincia': 'Sondrio'}, {'lat': 46.1321629, 'lng': 9.5694656, 'valore': 18.0, 'comune': 'Morbegno', 'provincia': 'Sondrio'}, {'lat': 46.32336235, 'lng': 10.258413671017705, 'valore': 8.0, 'comune': 'Sondrio', 'provincia': 'Sondrio'}, {'lat': 45.5406637, 'lng': 8.8481616, 'valore': 76.0, 'comune': 'Arconate', 'provincia': 'Milano'}, {'lat': 45.5440234, 'lng': 9.1707872, 'valore': 38.0, 'comune': 'Cormano', 'provincia': 'Milano'}, {'lat': 45.4641943, 'lng': 9.1896346, 'valore': 83.0, 'comune': 'Milano', 'provincia': 'Milano'}, {'lat': 45.288179, 'lng': 8.9924871, 'valore': 52.0, 'comune': 'Motta Visconti', 'provincia': 'Milano'}, {'lat': 45.5010216, 'lng': 9.3263354, 'valore': 84.0, 'comune': 'Pioltello', 'provincia': 'Milano'}, {'lat': 45.7566557, 'lng': 9.754219200862249, 'valore': 83.0, 'comune': 'Bergamo', 'provincia': 'Bergamo'}, {'lat': 45.691379, 'lng': 9.472649, 'valore': 58.0, 'comune': "Calusco d'Adda", 'provincia': 'Bergamo'}, {'lat': 45.4941243, 'lng': 9.5678078, 'valore': 79.0, 'comune': "Casirate d'Adda", 'provincia': 'Bergamo'}, {'lat': 45.616078, 'lng': 9.589053, 'valore': 98.0, 'comune': 'Osio Sotto', 'provincia': 'Bergamo'}, {'lat': 45.77958045, 'lng': 10.4258729694612, 'valore': 62.0, 'comune': 'Brescia', 'provincia': 'Brescia'}, {'lat': 45.2552458, 'lng': 10.2934106, 'valore': 60.0, 'comune': 'Gambara', 'provincia': 'Brescia'}, {'lat': 45.4610389, 'lng': 10.4845346, 'valore': 64.0, 'comune': 'Lonato del Garda', 'provincia': 'Brescia'}, {'lat': 45.64685, 'lng': 10.3884485, 'valore': 34.0, 'comune': 'Odolo', 'provincia': 'Brescia'}, {'lat': 45.6618702, 'lng': 10.1958762, 'valore': 49.0, 'comune': 'Sarezzo', 'provincia': 'Brescia'}, {'lat': 45.115059, 'lng': 8.864347, 'valore': 49.0, 'comune': 'Ferrera Erbognone', 'provincia': 'Pavia'}, {'lat': 45.059858, 'lng': 8.848447, 'valore': 30.0, 'comune': 'Mezzana Bigli', 'provincia': 'Pavia'}, {'lat': 45.03685465, 'lng': 9.137825082826026, 'valore': 77.0, 'comune': 'Pavia', 'provincia': 'Pavia'}, {'lat': 44.9926704, 'lng': 9.0086667, 'valore': 87.0, 'comune': 'Voghera', 'provincia': 'Pavia'}, {'lat': 45.26744425, 'lng': 10.00309541973796, 'valore': 70.0, 'comune': "Corte de' Cortesi con Cignone", 'provincia': 'Cremona'}, {'lat': 45.362828, 'lng': 9.6874573, 'valore': 63.0, 'comune': 'Crema', 'provincia': 'Cremona'}, {'lat': 45.22086405, 'lng': 10.037037979628856, 'valore': 52.0, 'comune': 'Cremona', 'provincia': 'Cremona'}, {'lat': 45.1487508, 'lng': 9.9296724, 'valore': 61.0, 'comune': 'Spinadesco', 'provincia': 'Cremona'}, {'lat': 45.1692628, 'lng': 10.670836515673878, 'valore': 58.0, 'comune': 'Mantova', 'provincia': 'Mantova'}, {'lat': 45.4125151, 'lng': 10.6872208, 'valore': 49.0, 'comune': 'Ponti sul Mincio', 'provincia': 'Mantova'}, {'lat': 44.9950936, 'lng': 11.0729809, 'valore': 52.0, 'comune': 'Schivenoglia', 'provincia': 'Mantova'}, {'lat': 44.9267857, 'lng': 10.520223, 'valore': 63.0, 'comune': 'Viadana', 'provincia': 'Mantova'}, {'lat': 46.1363111, 'lng': 9.3738195, 'valore': 30.0, 'comune': 'Colico', 'provincia': 'Lecco'}, {'lat': 45.9005485, 'lng': 9.41202482143963, 'valore': 67.0, 'comune': 'Lecco', 'provincia': 'Lecco'}, {'lat': 45.9323784, 'lng': 9.4865286, 'valore': 113.0, 'comune': 'Moggio', 'provincia': 'Lecco'}, {'lat': 46.0128352, 'lng': 9.2963201, 'valore': 53.0, 'comune': 'Perledo', 'provincia': 'Lecco'}, {'lat': 45.846282, 'lng': 9.358244, 'valore': 78.0, 'comune': 'Valmadrera', 'provincia': 'Lecco'}, {'lat': 45.3119118, 'lng': 9.5942124, 'valore': 58.0, 'comune': 'Abbadia Cerreto', 'provincia': 'Lodi'}, {'lat': 45.23307, 'lng': 9.668062, 'valore': 79.0, 'comune': 'Bertonico', 'provincia': 'Lodi'}, {'lat': 45.2613104, 'lng': 9.491678060021837, 'valore': 87.0, 'comune': 'Lodi', 'provincia': 'Lodi'}, {'lat': 45.6395418, 'lng': 9.278830418070044, 'valore': 67.0, 'comune': 'Monza', 'provincia': 'Monza e della Brianza'}, {'lat': 46.65594545, 'lng': 11.23021287087526, 'valore': 19.0, 'comune': 'Bolzano', 'provincia': 'Bolzano'}, {'lat': 46.7963194, 'lng': 11.9355121, 'valore': 4.0, 'comune': 'Brunico', 'provincia': 'Bolzano'}, {'lat': 46.2687016, 'lng': 11.2226851, 'valore': 43.0, 'comune': 'Cortina sulla strada del vino', 'provincia': 'Bolzano'}, {'lat': 46.5629355, 'lng': 11.44143495474516, 'valore': 45.0, 'comune': 'Renon', 'provincia': 'Bolzano'}, {'lat': 46.0533463, 'lng': 11.4566004, 'valore': 15.0, 'comune': 'Borgo Valsugana', 'provincia': 'Trento'}, {'lat': 46.2120936, 'lng': 11.0935086, 'valore': 26.0, 'comune': 'Mezzolombardo', 'provincia': 'Trento'}, {'lat': 45.8847708, 'lng': 10.8396942, 'valore': 48.0, 'comune': 'Riva del Garda', 'provincia': 'Trento'}, {'lat': 46.1029536, 'lng': 11.12974249416882, 'valore': 34.0, 'comune': 'Trento', 'provincia': 'Trento'}, {'lat': 46.099826750000005, 'lng': 11.016184907530835, 'valore': 111.0, 'comune': 'Vallelaghi', 'provincia': 'Trento'}, {'lat': 45.6221024, 'lng': 11.0295169, 'valore': 74.0, 'comune': 'Bosco Chiesanuova', 'provincia': 'Verona'}, {'lat': 45.192498, 'lng': 11.3111274, 'valore': 77.0, 'comune': 'Legnago', 'provincia': 'Verona'}, {'lat': 45.3956425, 'lng': 11.2700817, 'valore': 64.0, 'comune': 'San Bonifacio', 'provincia': 'Verona'}, {'lat': 45.4424977, 'lng': 10.985737689444765, 'valore': 64.0, 'comune': 'Verona', 'provincia': 'Verona'}, {'lat': 45.8753771, 'lng': 11.5106998, 'valore': 68.0, 'comune': 'Asiago', 'provincia': 'Vicenza'}, {'lat': 45.7669109, 'lng': 11.7343469, 'valore': 39.0, 'comune': 'Bassano del Grappa', 'provincia': 'Vicenza'}, {'lat': 45.7113511, 'lng': 11.3553593, 'valore': 70.0, 'comune': 'Schio', 'provincia': 'Vicenza'}, {'lat': 45.63485905, 'lng': 11.40635425660249, 'valore': 59.0, 'comune': 'Vicenza', 'provincia': 'Vicenza'}, {'lat': 46.2805407, 'lng': 12.078913722504204, 'valore': 9.0, 'comune': 'Belluno', 'provincia': 'Belluno'}, {'lat': 46.0163755, 'lng': 11.9062541, 'valore': 10.0, 'comune': 'Feltre', 'provincia': 'Belluno'}, {'lat': 46.1306681, 'lng': 12.3548944, 'valore': 17.0, 'comune': 'Alpago', 'provincia': 'Belluno'}, {'lat': 45.8862172, 'lng': 12.2977566, 'valore': 43.0, 'comune': 'Conegliano', 'provincia': 'Treviso'}, {'lat': 45.8223904, 'lng': 12.5377124, 'valore': 22.0, 'comune': 'Mansu√®', 'provincia': 'Treviso'}, {'lat': 45.80669135, 'lng': 12.206315763116372, 'valore': 29.0, 'comune': 'Treviso', 'provincia': 'Treviso'}, {'lat': 45.6294811, 'lng': 12.5641057, 'valore': 29.0, 'comune': 'San Don√† di Piave', 'provincia': 'Venezia'}, {'lat': 45.4371908, 'lng': 12.3345898, 'valore': 42.0, 'comune': 'Venezia', 'provincia': 'Venezia'}, {'lat': 45.4371908, 'lng': 12.3345898, 'valore': 42.0, 'comune': 'Venezia', 'provincia': 'Venezia'}, {'lat': 45.2894673, 'lng': 11.6723755, 'valore': 64.0, 'comune': 'Cinto Euganeo', 'provincia': 'Padova'}, {'lat': 45.2240069, 'lng': 11.659796, 'valore': 51.0, 'comune': 'Este', 'provincia': 'Padova'}, {'lat': 45.391408, 'lng': 11.805848677115884, 'valore': 58.0, 'comune': 'Padova', 'provincia': 'Padova'}, {'lat': 45.563698, 'lng': 11.906406, 'valore': 45.0, 'comune': 'Santa Giustina in Colle', 'provincia': 'Padova'}, {'lat': 45.0531228, 'lng': 12.0572, 'valore': 23.0, 'comune': 'Adria', 'provincia': 'Rovigo'}, {'lat': 45.0940564, 'lng': 11.4934621, 'valore': 53.0, 'comune': 'Badia Polesine', 'provincia': 'Rovigo'}, {'lat': 44.9777098, 'lng': 12.272683528362364, 'valore': 72.0, 'comune': 'Rovigo', 'provincia': 'Rovigo'}, {'lat': 45.8835902, 'lng': 13.2849613, 'valore': 25.0, 'comune': 'Bagnaria Arsa', 'provincia': 'Udine'}, {'lat': 46.49784915, 'lng': 13.433149879990612, 'valore': 10.0, 'comune': 'Malborghetto Valbruna', 'provincia': 'Udine'}, {'lat': 46.5229362, 'lng': 12.9221152, 'valore': 7.0, 'comune': 'Ravascletto', 'provincia': 'Udine'}, {'lat': 45.9779201, 'lng': 13.4010809, 'valore': 21.0, 'comune': 'San Giovanni al Natisone', 'provincia': 'Udine'}, {'lat': 46.4295026, 'lng': 13.0561666, 'valore': 23.0, 'comune': 'Tolmezzo', 'provincia': 'Udine'}, {'lat': 45.822216, 'lng': 13.276933, 'valore': 26.0, 'comune': 'Torviscosa', 'provincia': 'Udine'}, {'lat': 46.0634632, 'lng': 13.2358377, 'valore': 35.0, 'comune': 'Udine', 'provincia': 'Udine'}, {'lat': 45.7836083, 'lng': 13.413018658333332, 'valore': 19.0, 'comune': 'Fiumicello Villa Vicentina', 'provincia': 'Udine'}, {'lat': 45.8446301, 'lng': 13.5401419, 'valore': 29.0, 'comune': 'Doberd√≤ del Lago', 'provincia': 'Gorizia'}, {'lat': 45.9441278, 'lng': 13.6252288, 'valore': 31.0, 'comune': 'Gorizia', 'provincia': 'Gorizia'}, {'lat': 45.6781065, 'lng': 13.3979091, 'valore': 38.0, 'comune': 'Grado', 'provincia': 'Gorizia'}, {'lat': 45.8049454, 'lng': 13.5330592, 'valore': 28.0, 'comune': 'Monfalcone', 'provincia': 'Gorizia'}, {'lat': 45.8278081, 'lng': 13.5018454, 'valore': 20.0, 'comune': 'Ronchi dei Legionari', 'provincia': 'Gorizia'}, {'lat': 45.6496485, 'lng': 13.7772781, 'valore': 28.0, 'comune': 'Trieste', 'provincia': 'Trieste'}, {'lat': 45.9035103, 'lng': 12.5259887, 'valore': 27.0, 'comune': 'Brugnera', 'provincia': 'Pordenone'}, {'lat': 45.8581407, 'lng': 12.9293364, 'valore': 34.0, 'comune': 'Morsano al Tagliamento', 'provincia': 'Pordenone'}, {'lat': 45.946555, 'lng': 12.601780874786431, 'valore': 20.0, 'comune': 'Porcia', 'provincia': 'Pordenone'}, {'lat': 44.0698777, 'lng': 7.8712894, 'valore': 47.0, 'comune': 'Pornassio', 'provincia': 'Imperia'}, {'lat': 43.8198253, 'lng': 7.7748827, 'valore': 10.0, 'comune': 'Sanremo', 'provincia': 'Imperia'}, {'lat': 44.3902587, 'lng': 8.2079522, 'valore': 54.0, 'comune': 'Cengio', 'provincia': 'Savona'}, {'lat': 44.292536, 'lng': 8.412652, 'valore': 50.0, 'comune': 'Quiliano', 'provincia': 'Savona'}, {'lat': 44.2334238, 'lng': 8.252572737021062, 'valore': 39.0, 'comune': 'Savona', 'provincia': 'Savona'}, {'lat': 44.40726, 'lng': 8.9338624, 'valore': 88.0, 'comune': 'Genova', 'provincia': 'Genova'}, {'lat': 44.5655702, 'lng': 9.1859403, 'valore': 25.0, 'comune': 'Propata', 'provincia': 'Genova'}, {'lat': 44.1876494, 'lng': 9.8956159, 'valore': 10.0, 'comune': 'Bolano', 'provincia': 'La Spezia'}, {'lat': 44.23836595, 'lng': 9.691232634547536, 'valore': 21.0, 'comune': 'La Spezia', 'provincia': 'La Spezia'}, {'lat': 44.987157, 'lng': 9.9535782, 'valore': 49.0, 'comune': 'Besenzone', 'provincia': 'Piacenza'}, {'lat': 44.7157673, 'lng': 9.3602888, 'valore': 28.0, 'comune': 'Corte Brugnatella', 'provincia': 'Piacenza'}, {'lat': 44.821994, 'lng': 9.8284819, 'valore': 66.0, 'comune': "Lugagnano Val d'Arda", 'provincia': 'Piacenza'}, {'lat': 44.8476352, 'lng': 9.666531257696896, 'valore': 90.0, 'comune': 'Piacenza', 'provincia': 'Piacenza'}, {'lat': 44.9265322, 'lng': 10.377117, 'valore': 67.0, 'comune': 'Colorno', 'provincia': 'Parma'}, {'lat': 44.6130645, 'lng': 10.2661136, 'valore': 77.0, 'comune': 'Langhirano', 'provincia': 'Parma'}, {'lat': 44.6952006, 'lng': 10.097986896904466, 'valore': 61.0, 'comune': 'Parma', 'provincia': 'Parma'}, {'lat': 44.5102806, 'lng': 10.7286395, 'valore': 79.0, 'comune': 'Castellarano', 'provincia': "Reggio nell'Emilia"}, {'lat': 44.9211516, 'lng': 10.6539985, 'valore': 79.0, 'comune': 'Guastalla', 'provincia': "Reggio nell'Emilia"}, {'lat': 44.6086674, 'lng': 10.594066675914796, 'valore': 62.0, 'comune': "Reggio nell'Emilia", 'provincia': "Reggio nell'Emilia"}, {'lat': 44.365056, 'lng': 10.465995, 'valore': 11.0, 'comune': 'Villa Minozzo', 'provincia': "Reggio nell'Emilia"}, {'lat': 44.7835699, 'lng': 10.8854523, 'valore': 33.0, 'comune': 'Carpi', 'provincia': 'Modena'}, {'lat': 44.8872071, 'lng': 11.0661063, 'valore': 46.0, 'comune': 'Mirandola', 'provincia': 'Modena'}, {'lat': 44.5384728, 'lng': 10.93596087053074, 'valore': 68.0, 'comune': 'Modena', 'provincia': 'Modena'}, {'lat': 44.5409769, 'lng': 10.7829023, 'valore': 67.0, 'comune': 'Sassuolo', 'provincia': 'Modena'}, {'lat': 44.4938203, 'lng': 11.3426327, 'valore': 49.0, 'comune': 'Bologna', 'provincia': 'Bologna'}, {'lat': 44.620853, 'lng': 11.6702371, 'valore': 40.0, 'comune': 'Molinella', 'provincia': 'Bologna'}, {'lat': 44.1239131, 'lng': 10.937216088213724, 'valore': 0.0, 'comune': 'Alto Reno Terme', 'provincia': 'Bologna'}, {'lat': 44.7274395, 'lng': 11.2903029, 'valore': 39.0, 'comune': 'Cento', 'provincia': 'Ferrara'}, {'lat': 44.76676425, 'lng': 11.827938995640167, 'valore': 34.0, 'comune': 'Ferrara', 'provincia': 'Ferrara'}, {'lat': 44.8824077, 'lng': 11.9793488, 'valore': 57.0, 'comune': 'Jolanda di Savoia', 'provincia': 'Ferrara'}, {'lat': 44.745678, 'lng': 11.943521, 'valore': 40.0, 'comune': 'Ostellato', 'provincia': 'Ferrara'}, {'lat': 44.2609836, 'lng': 12.3495462, 'valore': 37.0, 'comune': 'Cervia', 'provincia': 'Ravenna'}, {'lat': 44.2855555, 'lng': 11.8832055, 'valore': 8.0, 'comune': 'Faenza', 'provincia': 'Ravenna'}, {'lat': 44.3640607, 'lng': 12.059009490863945, 'valore': 18.0, 'comune': 'Ravenna', 'provincia': 'Ravenna'}, {'lat': 44.2227278, 'lng': 12.041273, 'valore': 37.0, 'comune': 'Forl√¨', 'provincia': "Forli'-Cesena"}, {'lat': 44.0925118, 'lng': 12.3991309, 'valore': 29.0, 'comune': 'Savignano sul Rubicone', 'provincia': "Forli'-Cesena"}, {'lat': 44.004663, 'lng': 12.300541, 'valore': 37.0, 'comune': 'Sogliano al Rubicone', 'provincia': "Forli'-Cesena"}, {'lat': 43.946543250000005, 'lng': 12.63074901925494, 'valore': 18.0, 'comune': 'Rimini', 'provincia': 'Rimini'}, {'lat': 43.983611, 'lng': 12.4211632, 'valore': 43.0, 'comune': 'Verucchio', 'provincia': 'Rimini'}, {'lat': 43.896961, 'lng': 12.343644, 'valore': 20.0, 'comune': 'San Leo', 'provincia': 'Rimini'}, {'lat': 44.017763900000006, 'lng': 10.454430026192636, 'valore': 28.0, 'comune': 'Lucca', 'provincia': 'Lucca'}, {'lat': 43.9352396, 'lng': 11.0158786, 'valore': 27.0, 'comune': 'Montale', 'provincia': 'Pistoia'}, {'lat': 43.7697955, 'lng': 11.2556404, 'valore': 19.0, 'comune': 'Firenze', 'provincia': 'Firenze'}, {'lat': 43.7806931, 'lng': 11.0964527, 'valore': 24.0, 'comune': 'Signa', 'provincia': 'Firenze'}, {'lat': 43.4714722, 'lng': 10.679791173704576, 'valore': 1.0, 'comune': 'Pisa', 'provincia': 'Pisa'}, {'lat': 43.2992367, 'lng': 10.8724009, 'valore': 11.0, 'comune': 'Pomarance', 'provincia': 'Pisa'}, {'lat': 43.7101077, 'lng': 10.7819415, 'valore': 7.0, 'comune': "Santa Croce sull'Arno", 'provincia': 'Pisa'}, {'lat': 43.51714415, 'lng': 11.763928194732204, 'valore': 1.0, 'comune': 'Arezzo', 'provincia': 'Arezzo'}, {'lat': 43.662352, 'lng': 11.881338, 'valore': 4.0, 'comune': 'Chitignano', 'provincia': 'Arezzo'}, {'lat': 42.7751102, 'lng': 11.287804427628435, 'valore': 28.0, 'comune': 'Grosseto', 'provincia': 'Grosseto'}, {'lat': 43.1427366, 'lng': 12.2034965, 'valore': 37.0, 'comune': 'Magione', 'provincia': 'Perugia'}, {'lat': 43.1070321, 'lng': 12.402996209906489, 'valore': 4.0, 'comune': 'Perugia', 'provincia': 'Perugia'}, {'lat': 43.028542, 'lng': 12.44136, 'valore': 9.0, 'comune': 'Torgiano', 'provincia': 'Perugia'}, {'lat': 42.5195891, 'lng': 12.5152257, 'valore': 0.0, 'comune': 'Narni', 'provincia': 'Terni'}, {'lat': 42.7186152, 'lng': 12.1087907, 'valore': 20.0, 'comune': 'Orvieto', 'provincia': 'Terni'}, {'lat': 42.6539486, 'lng': 12.439652829139408, 'valore': 0.0, 'comune': 'Terni', 'provincia': 'Terni'}, {'lat': 43.9098114, 'lng': 12.9131228, 'valore': 12.0, 'comune': 'Pesaro', 'provincia': 'Pesaro e Urbino'}, {'lat': 43.7262608, 'lng': 12.6363135, 'valore': 6.0, 'comune': 'Urbino', 'provincia': 'Pesaro e Urbino'}, {'lat': 43.4801189, 'lng': 13.218727943815642, 'valore': 19.0, 'comune': 'Ancona', 'provincia': 'Ancona'}, {'lat': 43.6020552, 'lng': 13.3254004, 'valore': 0.0, 'comune': 'Chiaravalle', 'provincia': 'Ancona'}, {'lat': 43.6293969, 'lng': 13.3966763, 'valore': 5.0, 'comune': 'Falconara Marittima', 'provincia': 'Ancona'}, {'lat': 43.429655, 'lng': 12.934965, 'valore': 28.0, 'comune': 'Genga', 'provincia': 'Ancona'}, {'lat': 43.3055233, 'lng': 13.7229297, 'valore': 1.0, 'comune': 'Civitanova Marche', 'provincia': 'Macerata'}, {'lat': 43.15297805, 'lng': 13.150882217502016, 'valore': 19.0, 'comune': 'Macerata', 'provincia': 'Macerata'}, {'lat': 42.8834204, 'lng': 13.539593040686007, 'valore': 24.0, 'comune': 'Ascoli Piceno', 'provincia': 'Ascoli Piceno'}, {'lat': 42.8991551, 'lng': 13.3268587, 'valore': 44.0, 'comune': 'Montemonaco', 'provincia': 'Ascoli Piceno'}, {'lat': 42.7439961, 'lng': 11.864988, 'valore': 1.0, 'comune': 'Acquapendente', 'provincia': 'Viterbo'}, {'lat': 42.56315, 'lng': 12.9638499, 'valore': 5.0, 'comune': 'Leonessa', 'provincia': 'Rieti'}, {'lat': 42.156218, 'lng': 11.9038323, 'valore': 31.0, 'comune': 'Allumiere', 'provincia': 'Roma'}, {'lat': 42.0937524, 'lng': 11.7922462, 'valore': 12.0, 'comune': 'Civitavecchia', 'provincia': 'Roma'}, {'lat': 42.3102619, 'lng': 13.95759010584892, 'valore': 8.0, 'comune': 'Pescara', 'provincia': 'Pescara'}, {'lat': 42.10269285, 'lng': 14.41590530501923, 'valore': 14.0, 'comune': 'Chieti', 'provincia': 'Chieti'}, {'lat': 42.4168011, 'lng': 14.2914819, 'valore': 2.0, 'comune': 'Francavilla al Mare', 'provincia': 'Chieti'}, {'lat': 41.7172648, 'lng': 14.82622669782002, 'valore': 4.0, 'comune': 'Campobasso', 'provincia': 'Campobasso'}, {'lat': 41.435024, 'lng': 14.541729, 'valore': 37.0, 'comune': 'Guardiaregia', 'provincia': 'Campobasso'}, {'lat': 41.9983273, 'lng': 14.9939366, 'valore': 0.0, 'comune': 'Termoli', 'provincia': 'Campobasso'}, {'lat': 41.774129, 'lng': 14.260418, 'valore': 0.0, 'comune': 'Vastogirardi', 'provincia': 'Isernia'}, {'lat': 41.483425, 'lng': 14.045112, 'valore': 3.0, 'comune': 'Venafro', 'provincia': 'Isernia'}, {'lat': 41.20351925, 'lng': 14.116862382970815, 'valore': 0.0, 'comune': 'Caserta', 'provincia': 'Caserta'}, {'lat': 41.0398815, 'lng': 14.3792066, 'valore': 0.0, 'comune': 'Maddaloni', 'provincia': 'Caserta'}, {'lat': 40.966512, 'lng': 14.268029, 'valore': 24.0, 'comune': 'Orta di Atella', 'provincia': 'Caserta'}, {'lat': 41.190816, 'lng': 14.172324, 'valore': 0.0, 'comune': 'Pignataro Maggiore', 'provincia': 'Caserta'}, {'lat': 41.0123935, 'lng': 14.4829931, 'valore': 11.0, 'comune': 'San Felice a Cancello', 'provincia': 'Caserta'}, {'lat': 41.2476307, 'lng': 14.705705363146528, 'valore': 17.0, 'comune': 'Benevento', 'provincia': 'Benevento'}, {'lat': 40.9045572, 'lng': 14.2901223, 'valore': 19.0, 'comune': 'Casoria', 'provincia': 'Napoli'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 21.0, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 40.8189733, 'lng': 14.3387454, 'valore': 9.0, 'comune': 'Portici', 'provincia': 'Napoli'}, {'lat': 40.927213, 'lng': 14.480134, 'valore': 30.0, 'comune': 'San Vitaliano', 'provincia': 'Napoli'}, {'lat': 40.7525236, 'lng': 14.4550044, 'valore': 15.0, 'comune': 'Torre Annunziata', 'provincia': 'Napoli'}, {'lat': 41.1526668, 'lng': 15.0885633, 'valore': 36.0, 'comune': 'Ariano Irpino', 'provincia': 'Avellino'}, {'lat': 40.9965446, 'lng': 15.1405690365004, 'valore': 6.0, 'comune': 'Avellino', 'provincia': 'Avellino'}, {'lat': 40.6092539, 'lng': 14.9821443, 'valore': 6.0, 'comune': 'Battipaglia', 'provincia': 'Salerno'}, {'lat': 40.7004616, 'lng': 14.7062633, 'valore': 26.0, 'comune': "Cava de' Tirreni", 'provincia': 'Salerno'}, {'lat': 40.4628565, 'lng': 15.3152335, 'valore': 9.0, 'comune': 'Ottati', 'provincia': 'Salerno'}, {'lat': 40.41944165, 'lng': 15.310608468834516, 'valore': 0.0, 'comune': 'Salerno', 'provincia': 'Salerno'}, {'lat': 41.5082727, 'lng': 15.3376465, 'valore': 0.0, 'comune': 'Lucera', 'provincia': 'Foggia'}, {'lat': 41.70544, 'lng': 15.967657, 'valore': 0.0, 'comune': "Monte Sant'Angelo", 'provincia': 'Foggia'}, {'lat': 41.6897761, 'lng': 15.3776211, 'valore': 2.0, 'comune': 'San Severo', 'provincia': 'Foggia'}, {'lat': 40.8285595, 'lng': 16.5527314, 'valore': 0.0, 'comune': 'Altamura', 'provincia': 'Bari'}, {'lat': 41.1257843, 'lng': 16.8620293, 'valore': 10.0, 'comune': 'Bari', 'provincia': 'Bari'}, {'lat': 40.957131, 'lng': 16.920388, 'valore': 10.0, 'comune': 'Casamassima', 'provincia': 'Bari'}, {'lat': 41.0825639, 'lng': 16.7805515, 'valore': 9.0, 'comune': 'Modugno', 'provincia': 'Bari'}, {'lat': 40.5361927, 'lng': 17.4342206, 'valore': 12.0, 'comune': 'Grottaglie', 'provincia': 'Taranto'}, {'lat': 40.54881555, 'lng': 17.08058012454743, 'valore': 10.0, 'comune': 'Taranto', 'provincia': 'Taranto'}, {'lat': 40.63591975, 'lng': 17.688443357842537, 'valore': 11.0, 'comune': 'Brindisi', 'provincia': 'Brindisi'}, {'lat': 40.7429852, 'lng': 17.425745, 'valore': 23.0, 'comune': 'Cisternino', 'provincia': 'Brindisi'}, {'lat': 40.3351996, 'lng': 18.0916278, 'valore': 3.0, 'comune': 'Arnesano', 'provincia': 'Lecce'}, {'lat': 40.1742781, 'lng': 18.1678388, 'valore': 3.0, 'comune': 'Galatina', 'provincia': 'Lecce'}, {'lat': 40.1522173, 'lng': 18.2260628338229, 'valore': 16.0, 'comune': 'Lecce', 'provincia': 'Lecce'}, {'lat': 41.3214976, 'lng': 16.2868696, 'valore': 0.0, 'comune': 'Barletta', 'provincia': 'Barletta-Andria-Trani'}, {'lat': 40.28281, 'lng': 15.888773, 'valore': 3.0, 'comune': 'Grumento Nova', 'provincia': 'Potenza'}, {'lat': 40.360513, 'lng': 16.098877, 'valore': 6.0, 'comune': 'Guardia Perticara', 'provincia': 'Potenza'}, {'lat': 41.045625, 'lng': 15.790762, 'valore': 0.0, 'comune': 'Lavello', 'provincia': 'Potenza'}, {'lat': 40.9961268, 'lng': 15.6556545, 'valore': 1.0, 'comune': 'Melfi', 'provincia': 'Potenza'}, {'lat': 40.51731195, 'lng': 15.821608824871046, 'valore': 14.0, 'comune': 'Potenza', 'provincia': 'Potenza'}, {'lat': 40.340114, 'lng': 15.9018352, 'valore': 1.0, 'comune': 'Viggiano', 'provincia': 'Potenza'}, {'lat': 40.501218, 'lng': 16.454683, 'valore': 0.0, 'comune': 'Ferrandina', 'provincia': 'Matera'}, {'lat': 40.4476419, 'lng': 16.47357384028852, 'valore': 0.0, 'comune': 'Matera', 'provincia': 'Matera'}, {'lat': 40.3905273, 'lng': 16.5567323, 'valore': 0.0, 'comune': 'Pisticci', 'provincia': 'Matera'}, {'lat': 40.6326231, 'lng': 16.2828135, 'valore': 2.0, 'comune': 'Grassano', 'provincia': 'Matera'}, {'lat': 39.721401, 'lng': 16.170186, 'valore': 25.0, 'comune': 'Firmo', 'provincia': 'Cosenza'}, {'lat': 39.7768368, 'lng': 16.1564716, 'valore': 0.0, 'comune': 'Saracena', 'provincia': 'Cosenza'}, {'lat': 38.954989, 'lng': 16.641105, 'valore': 4.0, 'comune': 'Simeri Crichi', 'provincia': 'Catanzaro'}, {'lat': 38.4065094, 'lng': 16.0774549, 'valore': 0.0, 'comune': 'Polistena', 'provincia': 'Reggio di Calabria'}, {'lat': 38.0173961, 'lng': 12.5160225, 'valore': 6.0, 'comune': 'Trapani', 'provincia': 'Trapani'}, {'lat': 38.1112268, 'lng': 13.3524434, 'valore': 5.0, 'comune': 'Palermo', 'provincia': 'Palermo'}, {'lat': 38.0438957, 'lng': 13.1198211, 'valore': 10.0, 'comune': 'Partinico', 'provincia': 'Palermo'}, {'lat': 37.983651, 'lng': 13.695554, 'valore': 2.0, 'comune': 'Termini Imerese', 'provincia': 'Palermo'}, {'lat': 38.1483059, 'lng': 15.2175523, 'valore': 1.0, 'comune': 'Barcellona Pozzo di Gotto', 'provincia': 'Messina'}, {'lat': 38.2208049, 'lng': 15.2415129, 'valore': 2.0, 'comune': 'Milazzo', 'provincia': 'Messina'}, {'lat': 38.169727, 'lng': 15.2725271, 'valore': 0.0, 'comune': 'San Filippo del Mela', 'provincia': 'Messina'}, {'lat': 37.3122991, 'lng': 13.57465, 'valore': 7.0, 'comune': 'Agrigento', 'provincia': 'Agrigento'}, {'lat': 35.511134150000004, 'lng': 12.59629135962961, 'valore': 7.0, 'comune': 'Lampedusa e Linosa', 'provincia': 'Agrigento'}, {'lat': 37.0664363, 'lng': 14.2502445, 'valore': 10.0, 'comune': 'Gela', 'provincia': 'Caltanissetta'}, {'lat': 37.5667573, 'lng': 14.2807473, 'valore': 35.0, 'comune': 'Enna', 'provincia': 'Enna'}, {'lat': 37.5023612, 'lng': 15.0873718, 'valore': 11.0, 'comune': 'Catania', 'provincia': 'Catania'}, {'lat': 37.5191722, 'lng': 15.0079363, 'valore': 9.0, 'comune': 'Misterbianco', 'provincia': 'Catania'}, {'lat': 37.5774071, 'lng': 15.094215, 'valore': 19.0, 'comune': 'San Giovanni la Punta', 'provincia': 'Catania'}, {'lat': 37.1782878, 'lng': 15.1266212, 'valore': 47.0, 'comune': 'Melilli', 'provincia': 'Siracusa'}, {'lat': 37.0646139, 'lng': 15.2907196, 'valore': 25.0, 'comune': 'Siracusa', 'provincia': 'Siracusa'}, {'lat': 37.1009166, 'lng': 15.1192778, 'valore': 18.0, 'comune': 'Solarino', 'provincia': 'Siracusa'}, {'lat': 40.5587291, 'lng': 8.3153206, 'valore': 0.0, 'comune': 'Alghero', 'provincia': 'Sassari'}, {'lat': 40.9232659, 'lng': 9.5027442, 'valore': 0.0, 'comune': 'Olbia', 'provincia': 'Sassari'}, {'lat': 40.8370333, 'lng': 8.4013292, 'valore': 0.0, 'comune': 'Porto Torres', 'provincia': 'Sassari'}, {'lat': 40.7778499, 'lng': 8.9219725134863, 'valore': 0.0, 'comune': 'Sassari', 'provincia': 'Sassari'}, {'lat': 40.2651904, 'lng': 8.7813868, 'valore': 22.0, 'comune': 'Macomer', 'provincia': 'Nuoro'}, {'lat': 40.2334988, 'lng': 9.0445989, 'valore': 2.0, 'comune': 'Ottana', 'provincia': 'Nuoro'}, {'lat': 39.291538, 'lng': 9.001542, 'valore': 1.0, 'comune': 'Assemini', 'provincia': 'Cagliari'}, {'lat': 39.291538, 'lng': 9.001542, 'valore': 0.0, 'comune': 'Assemini', 'provincia': 'Cagliari'}, {'lat': 39.2171994, 'lng': 9.113311, 'valore': 0.0, 'comune': 'Cagliari', 'provincia': 'Cagliari'}, {'lat': 39.2399728, 'lng': 9.1880967, 'valore': 3.0, 'comune': "Quartu Sant'Elena", 'provincia': 'Cagliari'}, {'lat': 39.0655592, 'lng': 9.0108295, 'valore': 13.0, 'comune': 'Sarroch', 'provincia': 'Cagliari'}, {'lat': 39.2539413, 'lng': 9.1432062, 'valore': 0.0, 'comune': 'Monserrato', 'provincia': 'Cagliari'}, {'lat': 39.442941, 'lng': 9.01474, 'valore': 0.0, 'comune': 'Nuraminis', 'provincia': 'Sud Sardegna'}, {'lat': 39.207031, 'lng': 8.380931, 'valore': 2.0, 'comune': 'Portoscuso', 'provincia': 'Sud Sardegna'}, {'lat': 41.727033, 'lng': 13.0041576, 'valore': 2.0, 'comune': 'Colleferro', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 24.0, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 42.0354641, 'lng': 11.867938, 'valore': 1.0, 'comune': 'Santa Marinella', 'provincia': 'Roma'}, {'lat': 41.7712145, 'lng': 12.2278855, 'valore': 0.0, 'comune': 'Fiumicino', 'provincia': 'Roma'}, {'lat': 41.218312, 'lng': 13.56281, 'valore': 0.0, 'comune': 'Gaeta', 'provincia': 'Latina'}, {'lat': 41.45952605, 'lng': 13.012591212188894, 'valore': 6.0, 'comune': 'Latina', 'provincia': 'Latina'}, {'lat': 41.6679656, 'lng': 13.6755758, 'valore': 8.0, 'comune': 'Fontechiari', 'provincia': 'Frosinone'}, {'lat': 41.6285468, 'lng': 13.57584977062367, 'valore': 0.0, 'comune': 'Frosinone', 'provincia': 'Frosinone'}, {'lat': 42.1368853, 'lng': 13.610341022538911, 'valore': 4.0, 'comune': "L'Aquila", 'provincia': "L'Aquila"}, {'lat': 42.3643016, 'lng': 14.0717952, 'valore': 10.0, 'comune': 'Cepagatti', 'provincia': 'Pescara'}];
















        // Funzione per determinare il colore del marker in base al valore
        function getColor(valore) {
                if (valore <= 0) {
                    return "green"; // PM10 molto basso
                } else if (valore > 0 && valore <= 25) {
                    return "yellow"; // PM10 basso
                } else if (valore > 25) {
                    return "red"; // PM2,5 alto
                }
            }

            // Aggiungi i marker alla mappa
            data.forEach(entry => {
                const circle = L.circleMarker([entry.lat, entry.lng], {
                    radius: 10,
                    color: getColor(entry.valore),
                    fillColor: getColor(entry.valore),
                    fillOpacity: 0.8
                });

                circle.bindPopup(`<b>Provincia:</b> ${entry.provincia}<br><b>Valore O3:</b> ${entry.valore}`);
                circle.addTo(map);
            });

            // Aggiungi i marker alla mappa
            data.forEach(entry => {
                const circle = L.circleMarker([entry.lat, entry.lng], {
                    radius: 10,
                    color: getColor(entry.valore),
                    fillColor: getColor(entry.valore),
                    fillOpacity: 0.8
                });

                // Contenuto del popup
                circle.bindPopup(`
                    <b>Comune:</b> ${entry.comune}<br>
                    <b>Provincia:</b> ${entry.provincia || "Non specificata"}<br>
                    <b>Valore O3:</b> ${entry.valore}
                `);

                circle.addTo(map);
            });

    </script>
</body>
</html>